<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="js/face-api.min.js"></script>
    <script src="js/scripts.js"></script>
    <title>2DVtuber</title>
</head>

<body>
    <div id="videoPreview">
        <p>video preview</p>
    </div>

    <div id="canvasPreview">
        <p>canvas preview</p>
    </div>
    <img id="img" src="face.jpg"></img>
    <canvas id="canvas"></canvas>
    <script type="text/javascript">
        // 画像の取得
        const img = document.getElementById('img')

        const app = async () =>
        {
            // モデルの読み込み
            await faceapi.nets.tinyFaceDetector.load("models/");
            await faceapi.nets.faceLandmark68Net.load("models/");

            // 顔検出の実行
            const detections = await faceapi.detectAllFaces(img, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks();

            // canvasへ描画
            const resizeResults = faceapi.resizeResults(detections, img);
            await new MyDrawFaceLandmarks(resizeResults).draw(canvas)

            // 結果の出力
            console.log(detections);
        }
        app()
    </script>
</body>

</html>